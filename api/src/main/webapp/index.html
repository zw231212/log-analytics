<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>动态数据源日志信息服务项目</title>
  <link rel="icon" href="static/favicon.ico" type="image/x-icon"/>
  <link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    [v-cloak]{
      display: none;
    }
  </style>
</head>
<body>
<!--这里是给打war包的时候用的,在运行main函数的时候也指向了这里-->

<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3
bg-white border-bottom shadow-sm">
  <h5 class="my-0 mr-md-auto font-weight-normal">
    <img style="width:200px;" alt="404" src="static/img/404.png" />
    动态数据源日志信息服务项目webapp
    <small>
      version：1.0.1
    </small>
  </h5>
  <nav class="my-2 my-md-0 mr-md-3">
    <!--<a class="p-2 text-dark" href="#">Features</a>-->
    <!--<a class="p-2 text-dark" href="#">Enterprise</a>-->
    <!--<a class="p-2 text-dark" href="#">Support</a>-->
    <!--<a class="p-2 text-dark" href="#">Pricing</a>-->

  </nav>
  <!--<button style="margin-bottom: 17px;" class="btn btn-outline-primary">查询</button>-->
</div>

<div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
  <h1 class="display-4">日志解析数据API 展示</h1>
  <p class="lead">日志解析结果数据查询API，数据来源于各单位上传的或者主动收割的日志解析结果文件。</p>
</div>

<div class="container" id="info-area">

  <div class="row">
    <div class="col-md-9">
      <input type="text" class="form-control" id="api-path" placeholder="api信息" value="" /><br />
      <textarea class="form-control" rows="10" id="response" >响应全文</textarea>
    </div>
    <div class="col-md-3">
      <select id="database" class="form-control">
        <option value="-1">请选择日志所属网站</option>
        <option value="share.com">共享网</option>
        <option value="2005dka10100">平台1</option>
      </select>
      <br />
      <select id="rest-api-select" class="form-control">
        <option value="-1">请选择查看的数据</option>
        <option value="">基本统计数据</option>
        <option value="">访问时长</option>
        <option value="">访问地区</option>
        <option value="">访问系统与浏览器</option>
        <option value="">访问日志</option>
        <option value="">访问来源</option>
        <option value="">错误页面</option>
      </select>
      <br />
      <div class="row">
        <div class="col-md-6 mb-3">
          <select id="month" class="form-control" v-cloak>
            <option value="-1">选择月份</option>
            <template v-for="item in months">
              <option value="{{item}}">
                {{item}}
              </option>
            </template>
          </select>
        </div>
        <div class="col-md-6 mb-3">
          <select id="year" class="form-control">
            <option value="-1">选择年份</option>
            <template v-for="item in years">
              <option value="{{item}}">{{item}}</option>
            </template>
          </select>
        </div>
      </div>
      <button style="margin-bottom: 17px;" class="btn btn-outline-primary">查询</button>
    </div>
  </div>
  
  <hr />
  <div style="background-color: #b8daff;">
    <h5 style="color: #005cbf;">
      &radic;API说明
    </h5>
    <p>
      请求数据说明：项目的根路径是在服务端设置的，本项目为api。请求的参数有id，year，month这三个，id是必须的。
      基本支持get和post请求，但是post的数据最终都会转为querystring。
      返回数据由code和body组成。
      <code lang="json">
        {
        code:int,
        body:object
        }
      </code>
    </p>
    <h5 style="color: #005cbf">&radic;日志解析结果上传与收割说明</h5>
    <p>
      在新版本的共享网的建设中，不直接对日志进行收集，各机构负责自己平台的日志的解析，然后将解析结果上传到共享网。
      由共享网对日志解析的结果数据进行入库存储，然后再统一进行日志数据的公示。日志的解析工具由共享网提供，而解析入库
      的程序也由共享网提供，各机构可下载进行尝试或者搭建自己的日志服务。
      其中对于日志的收割策略暂时还未有规定——策略暂未定。
    </p>

    <hr />
  </div>
  <div class="card-deck mb-3 text-center">
      <div class="card mb-4 shadow-sm">
        <div class="card-header">
          <h4 class="my-0 font-weight-normal">日志解析工具</h4>
        </div>
        <div class="card-body">
          <h1 class="card-title pricing-card-title">awstats</h1>
          <ul class="list-unstyled mt-3 mb-4">
            <li>本地执行</li>
            <li>安全快速</li>
          </ul>
          <a target="_blank" class="btn btn-lg btn-block btn-outline-primary"
             href="http://www.awstats.org/">项目主页</a>
        </div>
      </div>
      <div class="card mb-4 shadow-sm">
        <div class="card-header">
          <h4 class="my-0 font-weight-normal">解析结果入库工具</h4>
        </div>
        <div class="card-body">
          <h1 class="card-title pricing-card-title">aw2sql </h1>
          <ul class="list-unstyled mt-3 mb-4">
            <li>文本数据结构化</li>
            <li>存入mysql，可以与任意项目整合</li>
          </ul>
          <a class="btn btn-lg btn-block btn-outline-primary" href="https://github.com/zw231212/aw2sql"
             target="_blank">项目主页</a>
        </div>
      </div>
      <div class="card mb-4 shadow-sm">
        <div class="card-header">
          <h4 class="my-0 font-weight-normal">数据API服务项目</h4>
        </div>
        <div class="card-body">
          <h1 class="card-title pricing-card-title">log-analytics </h1>
          <ul class="list-unstyled mt-3 mb-4">
            <li>多数据源</li>
            <li>REST API服务</li>
          </ul>
          <a class="btn btn-lg btn-block btn-outline-primary"
             href="https://github.com/zw231212/log-analytics" target="_blank">项目主页</a>
        </div>
      </div>
    </div>

  <footer class="pt-4 my-md-5 pt-md-5 border-top">
    <div class="row">
      <div class="col-12 col-md">
        <img class="mb-2" src="static/favicon.ico" alt="" width="24" height="24">
        <small class="d-block mb-3 text-muted">&copy; 国家科技资源共享服务工程技术研究中心2017-2018</small>
      </div>
      <div class="col-6 col-md">
        <h5>Plan</h5>
        <ul class="list-unstyled text-small">
          <li><a class="text-muted" href="#">数据API说明</a></li>
        </ul>
      </div>
      <div class="col-6 col-md">
        <h5>Resources</h5>
        <ul class="list-unstyled text-small">
          <li><a class="text-muted" href="https://escience.org.cn/" target="_blank">项目来源</a></li>
        </ul>
      </div>
      <div class="col-6 col-md">
        <h5>About</h5>
        <ul class="list-unstyled text-small">
          <li><a class="text-muted" target="_blank" href="https://nstr.escience.net.cn/about">关于我们</a></li>
        </ul>
      </div>
    </div>
  </footer>
</div>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/echarts/4.1.0/echarts.min.js"></script>
<script src="static/js/vue/vue.min.js"></script>
<script src="static/js/vue/vue-resource.min.js"></script>
<script>
  var dbs = [{name:"共享杯",id:"share.com"}, {name:"平台1",id:"2005dka10100"}];

  var apis = [
      {name:"获取浏览数据",api:"v1/browser/list"},
      ];
  var infoVm = new Vue({
    el:"#info-area",
    data:{
      months:Array(12).fill('naive').map((v, i) =>{ return i+1}),
      years:Array(12).fill('naive').map((v, i) =>{ return 2007+i}),
      dbs:dbs,
      apis:apis
    },
    ready: function () {
    },
    computed:{

    },
    methods:{

    }
  });

  $(function () {

  });
  console.log(dbs)

  function getBrowserInfo(id){
    $.ajax({
      url:"v1/browser/list?id="+id,
      method:"GET",
      type:"json",
      data:{
        "begin":"2018-01-01",
        "end":"2018-09-02"
      },
      success:function(data){
        console.log(data)
      }
    });
  }
</script>
</body>
</html>